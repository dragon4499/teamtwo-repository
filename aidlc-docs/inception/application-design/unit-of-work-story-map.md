# Unit of Work - 스토리 매핑

---

## 매핑 요약

| 유닛 | 할당된 스토리 수 | MVP 스토리 | 향후 기능 |
|------|:---------------:|:---------:|:--------:|
| Unit 1: DataStore | 기반 인프라 (직접 스토리 없음) | - | - |
| Unit 2: Mock API | 기반 인프라 (직접 스토리 없음) | - | - |
| Unit 3: Business Logic | 15개 | 15개 | 0개 |
| Unit 4: Customer FE | 20개 | 17개 | 3개 |
| Unit 5: Admin FE | 18개 | 16개 | 2개 |
| 공통 (예외 처리) | 5개 | 5개 | 0개 |

---

## Unit 1: DataStore

기반 인프라 유닛으로 직접적인 사용자 스토리는 없지만, 모든 데이터 관련 스토리의 기반을 제공합니다.

### 지원하는 데이터 엔티티
- Store, AdminUser, Menu, Table, TableSession, Order, OrderItem, OrderHistory

---

## Unit 2: Mock API

기반 인프라 유닛으로 직접적인 사용자 스토리는 없지만, 모든 API 엔드포인트의 Mock 응답을 제공하여 프론트엔드 개발을 가능하게 합니다.

### 제공하는 Mock 엔드포인트
- 고객 API 6개, 관리자 API 14개, SSE 1개 (총 21개)

---

## Unit 3: Backend Business Logic

### 인증 관련
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 2.1.1 | 매장 관리자 로그인 | MVP |
| 2.1.2 | 관리자 세션 관리 (JWT 16시간) | MVP |

### 메뉴 관련
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 3.1.1 | 메뉴 목록 조회 (서버 로직) | MVP |
| 3.1.2 | 새 메뉴 등록 (서버 로직) | MVP |
| 3.1.3 | 메뉴 정보 수정 (서버 로직) | MVP |
| 3.1.4 | 메뉴 삭제 (서버 로직) | MVP |

### 주문 관련
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.4.2 | 주문 확정 처리 (서버 로직) | MVP |
| 2.2.1 | 주문 대시보드 실시간 업데이트 (SSE/EventBus) | MVP |
| 2.2.4 | 주문 상태 변경 (서버 로직) | MVP |
| 2.3.2 | 주문 직권 삭제 (서버 로직) | MVP |

### 테이블/세션 관련
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.1.1 | 테이블 태블릿 초기 설정 (서버 인증) | MVP |
| 1.1.2 | 고객 자동 로그인 (서버 세션 검증) | MVP |
| 2.3.1 | 테이블 초기 설정 관리 (서버 로직) | MVP |
| 2.3.3 | 테이블 세션 종료 (서버 로직) | MVP |
| 2.3.4 | 과거 주문 내역 조회 (서버 로직) | MVP |

---

## Unit 4: Customer Frontend

### 테이블 접근 및 자동 로그인
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.1.1 | 테이블 태블릿 초기 설정 (UI) | MVP |
| 1.1.2 | 고객 자동 로그인 (UI) | MVP |

### 메뉴 탐색 및 선택
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.2.1 | 메뉴 카테고리 탐색 | MVP |
| 1.2.2 | 메뉴 상세 정보 확인 | MVP |
| 1.2.3 | 메뉴 검색 기능 | 향후 기능 |

### 장바구니 관리
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.3.1 | 메뉴 장바구니 추가 | MVP |
| 1.3.2 | 장바구니 수량 조절 | MVP |
| 1.3.3 | 장바구니 총액 계산 | MVP |
| 1.3.4 | 장바구니 메뉴 삭제 | MVP |
| 1.3.5 | 장바구니 전체 비우기 | MVP |
| 1.3.6 | 장바구니 데이터 지속성 | MVP |

### 주문 생성 및 확정
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.4.1 | 주문 내역 최종 확인 | MVP |
| 1.4.2 | 주문 확정 처리 (UI) | MVP |
| 1.4.3 | 주문 성공 후 처리 | MVP |
| 1.4.4 | 주문 실패 처리 | MVP |

### 주문 내역 조회
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 1.5.1 | 현재 세션 주문 목록 조회 | MVP |
| 1.5.2 | 주문 상세 정보 확인 | MVP |
| 1.5.3 | 주문 상태 실시간 업데이트 | 향후 기능 |

---

## Unit 5: Admin Frontend

### 관리자 인증 및 접근
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 2.1.1 | 매장 관리자 로그인 (UI) | MVP |
| 2.1.2 | 관리자 세션 관리 (UI) | MVP |

### 실시간 주문 모니터링
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 2.2.1 | 주문 대시보드 실시간 업데이트 (UI) | MVP |
| 2.2.2 | 테이블별 주문 현황 표시 | MVP |
| 2.2.3 | 주문 상세 정보 조회 | MVP |
| 2.2.4 | 주문 상태 변경 (UI) | MVP |
| 2.2.5 | 주문 알림 및 강조 표시 | MVP |

### 테이블 관리
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 2.3.1 | 테이블 초기 설정 관리 (UI) | MVP |
| 2.3.2 | 주문 직권 삭제 (UI) | MVP |
| 2.3.3 | 테이블 세션 종료 (UI) | MVP |
| 2.3.4 | 과거 주문 내역 조회 (UI) | MVP |

### 메뉴 관리
| 스토리 | 설명 | 우선순위 |
|--------|------|---------|
| 3.1.1 | 메뉴 목록 조회 (UI) | MVP |
| 3.1.2 | 새 메뉴 등록 (UI) | MVP |
| 3.1.3 | 메뉴 정보 수정 (UI) | MVP |
| 3.1.4 | 메뉴 삭제 (UI) | MVP |
| 3.1.5 | 메뉴 노출 순서 조정 | 향후 기능 |
| 3.2.1 | 매장 기본 정보 설정 | 향후 기능 |

---

## 공통: 예외 처리 (모든 유닛에 걸쳐 구현)

| 스토리 | 설명 | 주요 구현 유닛 |
|--------|------|--------------|
| E.1 | 네트워크 연결 끊김 처리 | Unit 4, 5 (FE) + Unit 3 (BE) |
| E.2 | 서버 오류 처리 | Unit 3 (BE) + Unit 4, 5 (FE) |
| E.3 | 세션 만료 처리 | Unit 3 (BE) + Unit 4, 5 (FE) |
| E.4 | 잘못된 데이터 입력 처리 | Unit 3 (BE) + Unit 4, 5 (FE) |
| E.5 | 동시성 충돌 처리 | Unit 3 (BE) + Unit 5 (Admin FE) |

---

## 미할당 스토리 검증

✅ 모든 MVP 스토리가 유닛에 할당되었습니다.
✅ 향후 기능 스토리도 해당 유닛에 매핑되었습니다.
✅ 예외 처리 스토리는 관련 유닛에 분산 할당되었습니다.
✅ 미할당 스토리: 없음
