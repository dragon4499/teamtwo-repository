# NFR Requirements - Unit 4: Customer Frontend

---

## 1. 성능 요구사항 (Performance)

### 1.1 페이지 로딩 성능

| 항목 | 목표 | 구현 방법 |
|------|------|-----------|
| 초기 페이지 로드 | 2초 이내 | Vite 코드 스플리팅, React.lazy + Suspense |
| 페이지 전환 | 500ms 이내 | React Router v6 클라이언트 사이드 라우팅 |
| 번들 크기 (메인) | 200KB 이하 (gzip) | Tree shaking, 동적 import |
| First Contentful Paint | 1.5초 이내 | 최소 초기 번들, 비동기 데이터 로딩 |

### 1.2 렌더링 성능

| 항목 | 목표 | 구현 방법 |
|------|------|-----------|
| 메뉴 목록 렌더링 | 100개 메뉴 기준 16ms 이내 | React.memo, useMemo로 불필요한 리렌더링 방지 |
| 장바구니 업데이트 | 즉시 반영 (16ms 프레임) | useReducer 최적화, 선택적 Context 구독 |
| 카테고리 필터링 | 즉시 반영 | useMemo로 필터링 결과 캐싱 |
| 스크롤 성능 | 60fps 유지 | CSS will-change, 하드웨어 가속 활용 |

### 1.3 네트워크 성능

| 항목 | 목표 | 구현 방법 |
|------|------|-----------|
| API 응답 타임아웃 | 10초 | Axios 타임아웃 설정 |
| 메뉴 데이터 캐싱 | MenuContext lastFetched 기반 | 5분 이내 재요청 방지 |
| 이미지 로딩 | 플레이스홀더 이미지 사용 | MVP 단계 - 실제 이미지 없음 |

---

## 2. 보안 요구사항 (Security)

### 2.1 localStorage 보안

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 저장 데이터 | 테이블 설정 정보, 장바구니 데이터 | 민감 정보 최소화 |
| 비밀번호 저장 | localStorage에 평문 저장 (MVP) | 자동 로그인용, 서버 측 bcrypt 해싱으로 보호 |
| 세션 ID | 메모리(Context)에만 보관 | localStorage에 세션 ID 미저장 |
| XSS 방지 | React 기본 이스케이핑 활용 | dangerouslySetInnerHTML 사용 금지 |
| CSRF | SPA + API 분리 구조로 CSRF 토큰 불필요 | CORS 설정으로 보호 |

### 2.2 입력 검증

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| storeId | 비어있지 않은 문자열 | 클라이언트 측 기본 검증 |
| tableNumber | 1 이상 양의 정수 | 숫자 타입 검증 |
| password | 비어있지 않은 문자열 | 길이 제한 없음 (서버 측 검증 위임) |
| 수량 | 1~99 범위 정수 | 클라이언트 측 범위 검증 |

---

## 3. 신뢰성 요구사항 (Reliability)

### 3.1 오류 처리

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 네트워크 오류 | 모달로 안내 + 재시도 버튼 | 기능 설계 ERR 규칙 준수 |
| 서버 오류 (5xx) | 모달로 안내 + 재시도 버튼 | retryable=true |
| 세션 만료 (401) | 자동 재인증 시도 → 실패 시 모달 | TableSetupPage로 리다이렉트 |
| 입력 검증 실패 | 인라인 오류 메시지 | 해당 필드 아래 표시 |
| 경미한 오류 | 토스트 알림 (3초 자동 사라짐) | 메뉴 로딩 실패, 장바구니 저장 실패 |

### 3.2 데이터 영속성

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 장바구니 데이터 | localStorage 자동 저장/복원 | 브라우저 새로고침 시 유지 |
| 테이블 설정 | localStorage 영구 저장 | 최초 1회 설정 후 자동 로그인 |
| localStorage 실패 | 토스트 경고, 메모리 상태 유지 | QuotaExceededError 등 graceful 처리 |

### 3.3 오프라인 처리

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 네트워크 끊김 | API 호출 실패 시 모달/토스트 안내 | 기본 오류 표시 방식 |
| 재시도 | 사용자 수동 재시도 (버튼 클릭) | 자동 재시도 없음 |
| 주문 실패 | 장바구니 데이터 보존, 재시도 가능 | 3회 연속 실패 시 직원 문의 안내 |

---

## 4. 사용성 요구사항 (Usability)

### 4.1 반응형 디자인

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 대상 디바이스 | 태블릿 (768px~1024px) | 테이블오더 전용 태블릿 기기 |
| 최소 해상도 | 768px 너비 | iPad Mini 이상 |
| 최대 해상도 | 1024px 너비 | iPad Pro 10.5" 이하 |
| 터치 타겟 | 최소 44px × 44px | 터치 조작 편의성 |
| 폰트 크기 | 최소 16px (본문) | 가독성 확보 |

### 4.2 접근성 (Accessibility)

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 시맨틱 HTML | header, nav, main, section, button 등 | 의미 있는 HTML 요소 사용 |
| alt 텍스트 | 모든 이미지에 alt 속성 | 플레이스홀더 이미지 포함 |
| 키보드 네비게이션 | Tab/Enter/Escape 기본 지원 | 포커스 순서 논리적 배치 |
| 색상 대비 | 텍스트/배경 최소 4.5:1 비율 | 기본 수준 준수 |
| 포커스 표시 | 포커스 상태 시각적 표시 | outline 또는 ring 스타일 |

### 4.3 국제화 (i18n)

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 기본 언어 | 한국어 | 초기 배포 언어 |
| i18n 라이브러리 | react-i18next | 다국어 확장 가능 구조 |
| 텍스트 관리 | JSON 번역 파일 분리 | src/locales/ko.json |
| 날짜/시간 형식 | 로케일 기반 포맷팅 | Intl API 또는 date-fns |
| 통화 형식 | 원(₩) 단위, 천 단위 콤마 | Intl.NumberFormat 활용 |

---

## 5. 유지보수성 요구사항 (Maintainability)

### 5.1 코드 품질

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| 린터 | ESLint (Vite 기본 설정) | 코드 스타일 일관성 |
| 포맷터 | Prettier | 자동 코드 포맷팅 |
| 컴포넌트 구조 | 페이지/컴포넌트/컨텍스트/서비스 분리 | 관심사 분리 원칙 |
| 파일 네이밍 | PascalCase (컴포넌트), camelCase (유틸리티) | 일관된 네이밍 규칙 |

### 5.2 테스트 커버리지

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| Context 로직 | 단위 테스트 필수 | AuthContext, CartContext, MenuContext |
| 유틸리티 함수 | 단위 테스트 필수 | 금액 계산, 포맷팅 등 |
| 컴포넌트 렌더링 | 주요 컴포넌트 렌더링 테스트 | React Testing Library |
| 페이지 플로우 | 통합 테스트 | 장바구니→주문 플로우 |

---

## 6. 호환성 요구사항 (Compatibility)

### 6.1 브라우저 지원

| 브라우저 | 최소 버전 | 설명 |
|----------|-----------|------|
| Chrome | 90+ | 주요 대상 (태블릿 기본 브라우저) |
| Safari | 14+ | iPad Safari |
| Samsung Internet | 15+ | 삼성 태블릿 |
| Edge | 90+ | 보조 지원 |

### 6.2 JavaScript 호환성

| 항목 | 요구사항 | 설명 |
|------|----------|------|
| ES 버전 | ES2020+ | Vite 기본 타겟 |
| Polyfill | 불필요 | 최신 브라우저 대상 |
| localStorage | 필수 지원 | 데이터 영속화 핵심 |

