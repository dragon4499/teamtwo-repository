# NFR Requirements - Unit 2: Mock API & Core Structure

---

## 1. 성능 요구사항

### 1.1 API 응답 성능
| 항목 | 요구사항 | 비고 |
|------|---------|------|
| Mock 응답 시간 | 즉시 (< 10ms) | 하드코딩 데이터, I/O 없음 |
| SSE 초기 이벤트 | 연결 즉시 전송 | 지연 없음 |
| 동시 연결 | 제한 없음 (MVP) | uvicorn 기본 설정 |

### 1.2 SSE 연결 관리
| 항목 | 값 | 비고 |
|------|---|------|
| Keep-alive 간격 | 30초 | 연결 유지용 코멘트 전송 |
| 최대 연결 시간 | 제한 없음 | 클라이언트 해제 시 종료 |

---

## 2. 보안 요구사항

### 2.1 인증 (Mock 단계)
| 항목 | 요구사항 | 비고 |
|------|---------|------|
| 인증 검증 | 없음 (완전 통과) | Mock 단계 |
| CORS | localhost만 허용 | 개발 환경 전용 |

### 2.2 입력 검증
| 항목 | 요구사항 | 비고 |
|------|---------|------|
| 요청 본문 | Pydantic 모델 기반 검증 | FastAPI 자동 처리 |
| 경로 파라미터 | 타입 검증만 | FastAPI 자동 처리 |

---

## 3. 신뢰성 요구사항

### 3.1 오류 처리
| 항목 | 요구사항 | 비고 |
|------|---------|------|
| 전역 예외 핸들러 | 등록 (최소) | 500 응답 반환 |
| 검증 오류 | FastAPI 기본 422 | Pydantic 자동 |
| 미등록 경로 | FastAPI 기본 404 | 자동 처리 |

### 3.2 SSE 안정성
| 항목 | 요구사항 | 비고 |
|------|---------|------|
| 연결 해제 감지 | asyncio 기반 | 클라이언트 disconnect 처리 |
| 리소스 정리 | generator 종료 시 | 메모리 누수 방지 |

---

## 4. 로깅 요구사항

### 4.1 로깅 수준: 최소
| 이벤트 | 로깅 여부 | 로그 레벨 |
|--------|:--------:|----------|
| 앱 시작 | ✓ | INFO |
| 요청 처리 | ✗ | - |
| 오류 발생 | ✓ | ERROR |
| SSE 연결/해제 | ✓ | INFO |

---

## 5. 유지보수성 요구사항

### 5.1 코드 품질
| 항목 | 요구사항 |
|------|---------|
| 타입 힌트 | 모든 함수에 적용 |
| 라우터 분리 | 기능별 파일 분리 (customer, admin, sse) |
| Service 인터페이스 | ABC 기반 추상 클래스 |

### 5.2 테스트 커버리지
| 항목 | 요구사항 |
|------|---------|
| 엔드포인트 테스트 | 모든 엔드포인트 응답 코드/형식 검증 |
| SSE 테스트 | 이벤트 전송 검증 |
| 테스트 클라이언트 | httpx AsyncClient (FastAPI TestClient) |
